---
name: x-api-skill
description: Interact with the X (Twitter) API v2 and related add-ons using curl/HTTP: auth selection (OAuth 2.0, OAuth 1.0a, bearer), request shaping (fields/expansions), pagination, rate limits, error handling, and common endpoints (Posts, Users, Search, Streams, DMs, Lists, Spaces, Trends, Bookmarks, Communities, Compliance, Account Activity).
compatibility: Requires curl and python3; expects network access to docs.x.com and api.x.com.
---

# X API (v2) Skill

## Use This When

Use this skill when you need to:
- Design or debug X API requests (curl/HTTP).
- Choose authentication method for an endpoint (Bearer vs OAuth 2.0 user token vs OAuth 1.0a).
- Pick `fields` and `expansions` to get the objects you need in one request.
- Handle pagination, rate limits, retries/backoff, and error responses.

This skill is curl-first. It prefers concrete requests over SDK advice.

## Conventions

- Base API host: `https://api.x.com/2`.
- Terminology: docs use **Post**, but many endpoint paths still use `tweets` (for example `GET /2/tweets/:id`).
- Never inline secrets. Use env vars.

Suggested env vars:
- `X_BEARER_TOKEN` (app-only)
- `X_USER_ACCESS_TOKEN` (OAuth 2.0 user context)
- `X_CLIENT_ID` (OAuth 2.0 PKCE)
- `X_CLIENT_SECRET` (if applicable)

## Quick Start (Read-Only)

1. Identify the resource and endpoint (Posts, Users, Search, Streams, etc.).
2. Decide auth:
   - Public read: usually `Authorization: Bearer $X_BEARER_TOKEN`.
   - User actions (create/delete, bookmarks, DMs): OAuth user context.
3. Add only the `fields` and `expansions` you need.
4. Run the request; on `429`, read `x-rate-limit-reset` and back off.

Example (lookup a user by username):
```bash
curl -sS "https://api.x.com/2/users/by/username/xdevelopers" \
  -H "Authorization: Bearer $X_BEARER_TOKEN"
```

## Request Shaping: `fields` + `expansions`

The v2 pattern is:
- Ask for extra object properties with `*.fields=` (for example `tweet.fields=created_at,public_metrics`).
- Pull related objects into `includes` with `expansions=` (for example `expansions=author_id`).

When you need details for related objects, also request their fields (for example `user.fields=username,verified`).

Read: `/Users/jarrod/x-api-skill/references/request-shapes.md`

## Pagination

Most collection endpoints page via `next_token` (request param) and `meta.next_token` (response).

Read: `/Users/jarrod/x-api-skill/references/request-shapes.md`

## Rate Limits

Always capture and respect:
- `x-rate-limit-limit`
- `x-rate-limit-remaining`
- `x-rate-limit-reset`

Read: `/Users/jarrod/x-api-skill/references/fundamentals-rate-limits.md`

## Errors and Retries

Treat errors as data:
- Parse the response body.
- Use the HTTP status code to decide retry vs fix request.

Read: `/Users/jarrod/x-api-skill/references/fundamentals-errors.md`

## Write Actions

Write endpoints are included. When drafting write requests:
- State side effects in plain language (create/delete, send DM, follow/unfollow).
- Prefer idempotent patterns where possible.
- Avoid suggesting bulk actions without rate-limit and compliance considerations.

Note: in most agent harnesses, executing curl will still require user permission; this skill focuses on correctness of the request.

## Reference Map

Start here:
- `/Users/jarrod/x-api-skill/references/docs-map.md`
- `/Users/jarrod/x-api-skill/references/workflows.md`
- `/Users/jarrod/x-api-skill/references/x-api-groups.md`
- `/Users/jarrod/x-api-skill/references/x-api-catalog.md`
- Group references: each feature file in `/Users/jarrod/x-api-skill/references/` contains a curated section first, then an autogenerated inventory between `BEGIN AUTOGENERATED X API DOCS` markers.

Fundamentals:
- `/Users/jarrod/x-api-skill/references/fundamentals-auth.md`
- `/Users/jarrod/x-api-skill/references/fundamentals-rate-limits.md`
- `/Users/jarrod/x-api-skill/references/fundamentals-security.md`
- `/Users/jarrod/x-api-skill/references/fundamentals-errors.md`
- `/Users/jarrod/x-api-skill/references/fundamentals-ids.md`
- `/Users/jarrod/x-api-skill/references/fundamentals-counting-characters.md`

Core endpoints:
- `/Users/jarrod/x-api-skill/references/posts.md`
- `/Users/jarrod/x-api-skill/references/search.md`
- `/Users/jarrod/x-api-skill/references/streams.md`
- `/Users/jarrod/x-api-skill/references/users.md`
- `/Users/jarrod/x-api-skill/references/lists.md`
- `/Users/jarrod/x-api-skill/references/spaces.md`
- `/Users/jarrod/x-api-skill/references/direct-messages.md`
- `/Users/jarrod/x-api-skill/references/trends.md`

Add-ons:
- `/Users/jarrod/x-api-skill/references/bookmarks.md`
- `/Users/jarrod/x-api-skill/references/communities.md`
- `/Users/jarrod/x-api-skill/references/community-notes.md`
- `/Users/jarrod/x-api-skill/references/compliance.md`
- `/Users/jarrod/x-api-skill/references/account-activity.md`
- `/Users/jarrod/x-api-skill/references/activity.md`
- `/Users/jarrod/x-api-skill/references/connections.md`

## How To Find The Right Doc Fast

The docs index is long. Use ripgrep patterns against `/Users/jarrod/x-api-skill/references/docs-map.md`:
```bash
rg -n "create-post|delete-post|get-post|search|filtered-stream|dm|direct message|lists|spaces|trends|bookmarks|compliance|account activity" /Users/jarrod/x-api-skill/references/docs-map.md
```

## Helper: Generate Curl Skeleton From A Docs URL

If you have an X docs OpenAPI page URL and want a quick curl skeleton (method, path, auth schemes/scopes):
```bash
python3 /Users/jarrod/x-api-skill/scripts/x_openapi_curl.py https://docs.x.com/x-api/posts/get-post-by-id.md
```
